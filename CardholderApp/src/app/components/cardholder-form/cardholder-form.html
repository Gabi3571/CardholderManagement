<div class="form-card">
  <form [formGroup]="form">
    <div class="form-grid">
      <div *ngFor="let field of fields">
        <mat-form-field appearance="fill" class="form-field">
          <mat-label>{{ field.label }}</mat-label>
          <input matInput [type]="field.type" [formControlName]="field.key">

          <mat-error *ngIf="form.get(field.key)?.hasError('required') && form.get(field.key)?.touched">
            {{ field.label }} is required
          </mat-error>

          <mat-error *ngIf="form.get(field.key)?.hasError('maxlength') && form.get(field.key)?.touched">
            {{ field.label }} cannot exceed 
            {{ form.get(field.key)?.errors?.['maxlength']?.requiredLength }} characters
          </mat-error>

          <mat-error *ngIf="form.get(field.key)?.hasError('pattern') && form.get(field.key)?.touched">
            Invalid {{ field.label }} format
          </mat-error>

          <mat-error *ngIf="form.get(field.key)?.hasError('min') && form.get(field.key)?.touched">
            {{ field.label }} cannot be negative
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="form-actions">
      <button mat-stroked-button type="button" (click)="cancel()">Cancel</button>
      <button mat-raised-button color="primary" type="button" (click)="save()">Save</button>
    </div>
  </form>
</div>
